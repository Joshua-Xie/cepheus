---
# Data file for building the bootstrapping of Cepheus.
# Templates that use this data file:
#   **See `files` section below**

# NB: This file contains NO OS specific items but instead points to where it's located with the 'envrionment' section
# below. Portions that are common across all OS and public/private versions will be found here.

# IMPORTANT: Whatever data is here will be appended to the overall `build.yaml` that will be located `public` or
# `private` based on the value passed to the intial ./CEPH_UP script

# IMPORTANT: No section below can exist in other yaml files be used in the files being appended. For example,
# 'environment' section can not already exist in other yaml files. The except are OS specific yaml files.

# 'method' can only be `repo` or `pxe`. If `pxe` then the 'pxe_boot' section of the given OS yaml is used.
method: repo

version: 1.1.1

# NB: Chef client/server data that is OS specific is found in 'rhel.yaml', 'centos.yaml' and 'ubuntu.yaml'
# NB: Basic Chef info is found in the envrionment.yaml file.

# Base Chef Cookbook for all of Ceph
# Change the '-' to '_' of the cookbook name (ceph-chef)
# Part of 'prereqs' script...
ceph_chef: # (required file - cookbook - for build)
    version: 1.1.13
    # If debug is false then use the supermarket version of ceph-chef else use github version
    debug: true
    git:
        github: true
        url: https://github.com/
        repo: cepheus-io/ceph-chef
        branch: master

    # These gems are required for the `ceph-chef`
    gems: # (required files for build)
        -   name: netaddr
            version: 1.5.1
        -   name: chef-sugar
            version: 3.4.0

# If `inline` is true then substitute the name and verison inline else use url as specified
# NB: If there is a python dependency then use the example below and create one or more using the syntax below.
# It will automatically download if present.
# python: # (required files for build and runtime)
    # -   name: PyYAML
    #     version: 3.12
    #     inline: true
    #     url: http://pyyaml.org/download/pyyaml/

# Cache directories in the format of base/{cookbook,gem...}
cache:
    base: $HOME/.cepheus-cache
    cookbook: cookbooks
    gem: gems
    rpm: rpms
    deb: debs
    python: python
    pxe_boot: pxe_boot
    iso: isos
    loader: loaders

cookbooks: # (required files for build)
    - name: poise
      version: 2.7.2
    - name: chef-client
      version: 7.2.0
    - name: windows
      version: 2.1.1
    - name: ohai
      version: 5.0.0
    - name: cron
      version: 4.1.0
    - name: logrotate
      version: 2.1.0
    - name: compat_resource
      version: 12.16.3
    - name: ntp
      version: 3.3.1
    - name: yum
      version: 5.0.0
    - name: yum-epel
      version: 2.1.1
    - name: apt
      version: 6.0.1
    - name: apache2
      version: 3.2.2
    - name: chef_handler
      version: 2.1.0
    - name: firewall
      version: 2.5.4
    - name: chef-sugar
      version: 3.4.0
    - name: sudo
      version: 3.3.1
    - name: collectd
      version: 2.2.4
    - name: collectd_plugins
      version: 2.1.3
    - name: poise-service
      version: 1.4.2
    - name: yumgroup
      version: 0.5.0

# These gems come from a different source and have a different url format that the ceph-chef gems
gems: # (required files for build)
    - arr-pm-0.0.10
    - backports-3.6.4
    - cabin-0.7.1
    - childprocess-0.5.6
    - clamp-0.6.5
    - ffi-1.9.8
    - fpm-1.3.3
    - json-1.8.2

# These are required for the build environment to function correctly.
shell:
    - curl
    - rsync
    - ssh
    - git

# List of build environment files that *MUST* be built first in order to build system.
# When building files from templates add them here and it will happen automatically when running ./CEPH_UP
# Leave off the initial '/'. Scripts will add that if needed.
# These files should also be in the .gitignore file so that the final version will not be stored.
# Leave out `build.sh` from this list.
# Put these in the order you need them to be called in.
files:
    -   "bootstrap/common/base_environment.sh"
    -   "bootstrap/common/base.sh"
    -   "bootstrap/common/chef_runlists_update.sh"
    -   "bootstrap/common/bootstrap_validate_env.sh"
    -   "bootstrap/common/bootstrap_prereqs.sh"

# These files represent the build init and update files.
build_init_update_files:
    -   "bootstrap/common/cepheus_build_update.sh"
    -   "bootstrap/common/cepheus_bootstrap_init.sh"
    -   "bootstrap/common/cepheus_backup_rsync.sh"
    -   "bootstrap/common/cepheus_backup_no_rsync.sh"
    -   "bootstrap/common/bootstrap_chef_server.sh"

# These files represent the build update files that are generated by cepheus_build_update.sh once it's created from the template above
build_update_files:
    -   input: "$REPO_ROOT/data/templates/hosts.j2"
        output: "/etc/hosts"

# Other yaml files are appended here during the build process to make a new `build.yaml` file.
